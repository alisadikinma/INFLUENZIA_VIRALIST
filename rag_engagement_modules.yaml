# RAG Engagement Modules Configuration
# Version: v3.8.1
# Converted from: RAG_ENGAGEMENT_MODULES.md
# Purpose: Runtime engagement optimization and replay logic

version: "3.8.1"
pattern_ref_prefix: "!RAG_ENGAGEMENT_MODULES"
compiled_from:
  - "Content Strategy Framework v3.8.1"
  - "Script Format Blueprint v3.8.1"

# ===== REPLAY LOGIC =====
replay_logic:
  core_mechanisms:
    narrative_mesh_architecture:
      concept: "binding_multiple_scripts_under_one_psychographic_universe"
      implementation: "narrative_mesh_id_tags_connecting_related_content"
      psychological_effect: "creates_anticipation_for_next_episode_and_encourages_binge_consumption"
      
      mesh_ids:
        series_self_sabotage:
          motif_keyword: "gagalin_diri_sendiri"
          emotional_arc: "curiosity_denial_realization"
          episode_progression: "problem_identification_pattern_recognition_solution_discovery"
        
        series_ai_romance:
          motif_keyword: "ai_relationship_exploration"
          emotional_arc: "curiosity_attachment_wisdom"
          episode_progression: "introduction_development_complexity_resolution"
        
        series_toxic_productivity:
          motif_keyword: "work_culture_critique"
          emotional_arc: "frustration_recognition_liberation"
          episode_progression: "problem_awareness_pattern_analysis_healthy_alternatives"
        
        series_mental_health_indo:
          motif_keyword: "indonesian_mental_health_normalization"
          emotional_arc: "shame_understanding_acceptance"
          episode_progression: "stigma_awareness_education_community_support"
        
        series_gen_z_wisdom:
          motif_keyword: "generational_insights_cultural_commentary"
          emotional_arc: "confusion_clarity_empowerment"
          episode_progression: "observation_analysis_wisdom_sharing"
    
    memory_trigger_injection:
      concept: "strategic_placement_of_memorable_phrases_sounds_visuals"
      implementation: "memory_trigger_injector_active_throughout_content"
      psychological_effect: "creates_recall_triggers_that_prompt_replay_for_missed_details"
      
      trigger_types:
        phrase_anchors: "repeated_catchphrases_or_signature_expressions"
        audio_anchors: "distinctive_sound_effects_or_musical_stings"
        visual_anchors: "specific_gestures_expressions_or_visual_elements"
        emotional_anchors: "peak_emotional_moments_that_create_lasting_impression"
      
      protocol:
        replay_trigger_active:
          condition: "replay_trigger = true"
          actions:
            - "flush_segment_memory_before_cta"
            - "regenerate_cta_with_base_intent_not_hallucinated_momentum"
            - "prevent_loop_hallucination_bleed"
        
        inject_memorable_elements:
          signature_phrase: "creator_specific_catchphrase"
          audio_anchor: "distinctive_sound_signature"
          visual_anchor: "memorable_gesture_or_expression"
          emotional_anchor: "peak_emotional_moment"
    
    episodic_cta_engine:
      concept: "ctas_that_hint_at_future_content_while_encouraging_immediate_replay"
      implementation: "episodic_cta_engine_with_binge_potential_detection"
      psychological_effect: "creates_anticipation_loop_and_immediate_replay_motivation"
      
      patterns:
        cliffhanger_ctas:
          - "Tapi ada satu hal yang belum gue cerita... next episode bakal mind-blowing"
          - "Plot twist terbesar masih coming up di episode selanjutnya"
        
        series_continuation:
          - "Ini baru episode 1 dari journey gue, stay tuned untuk plot twist selanjutnya"
          - "Series ini bakal mengubah cara kalian lihat [topic] selamanya"
        
        community_building:
          - "Drop teori kalian di comments, gue bakal bahas di episode berikutnya"
          - "Share pengalaman kalian, nanti gue feature di episode mendatang"
  
  replay_driven_narrative:
    loop_mesh_cta_cycle:
      phase_1_loop_creation:
        - "hook_creates_immediate_replay_motivation_through_incomplete_information"
        - "twist_provides_partial_satisfaction_while_hinting_at_deeper_layers"
        - "ending_leaves_strategic_questions_unanswered"
      
      phase_2_mesh_integration:
        - "content_connects_to_broader_narrative_universe"
        - "references_to_previous_or_future_episodes_create_continuity"
        - "shared_motifs_and_themes_create_familiar_comfort"
      
      phase_3_cta_activation:
        - "community_engagement_encourages_discussion_and_theory_building"
        - "anticipation_building_for_next_content_piece"
        - "immediate_replay_encouragement_through_missed_detail_hints"
      
      phase_4_loop_reinforcement:
        - "replay_reveals_previously_missed_details_or_connections"
        - "new_understanding_creates_satisfaction_while_generating_new_questions"
        - "cycle_repeats_with_increased_investment_and_anticipation"
  
  creator_specific_strategies:
    gadgetin:
      approach: "technical_depth_with_layered_information_revelation"
      strategy: "data_rich_content_that_rewards_multiple_viewings"
      implementation:
        first_view: "surface_level_technical_explanation"
        second_view: "deeper_technical_details_become_apparent"
        third_view: "practical_implications_and_connections_emerge"
      
      triggers:
        - "complex_data_visualizations_requiring_processing_time"
        - "technical_terminology_benefiting_from_repeated_exposure"
        - "practical_applications_becoming_clearer_with_familiarity"
    
    jovial:
      approach: "cultural_references_and_satirical_layers_with_hidden_depth"
      strategy: "humor_that_reveals_additional_layers_upon_replay"
      implementation:
        first_view: "surface_humor_and_entertainment_value"
        second_view: "cultural_references_and_social_commentary_depth"
        third_view: "personal_vulnerability_and_wisdom_beneath_humor"
      
      triggers:
        - "rapid_fire_cultural_references_rewarding_pause_and_replay"
        - "satirical_observations_with_multiple_interpretation_layers"
        - "emotional_authenticity_hidden_beneath_comedic_performance"
    
    samuel:
      approach: "emotional_depth_with_progressive_vulnerability_revelation"
      strategy: "personal_growth_insights_that_deepen_with_repeated_viewing"
      implementation:
        first_view: "relatable_struggle_and_basic_insight"
        second_view: "deeper_emotional_nuance_and_personal_details"
        third_view: "universal_wisdom_and_community_connection"
      
      triggers:
        - "emotional_authenticity_creating_deeper_connection_over_time"
        - "personal_growth_insights_applying_to_viewers_own_journey"
        - "community_wisdom_feeling_more_relevant_with_life_experience"
  
  auto_segment_split:
    enabled: true
    concept: "creates_segments_60_tokens_or_less_for_optimal_visual_rendering"
    purpose: "ensures_kling_sora_visual_sync_stability_while_maintaining_replay_value"
    implementation: "post_structure_segmentation_in_writer_engine"
    
    criteria:
      max_tokens: 60
      emotional_coherence: "maintained"
      visual_sync: "optimized"
      replay_value: "enhanced"
      memory_anchor: "embedded"
    
    benefits:
      - "visual_coherence_each_segment_maintains_consistent_visual_narrative"
      - "replay_precision_viewers_can_replay_specific_insight_segments"
      - "memory_anchoring_shorter_segments_create_more_memorable_chunks"
      - "platform_optimization_ideal_for_social_media_algorithm_preferences"
  
  replay_triggers:
    visual_triggers:
      - "fast_paced_visual_elements_quick_cuts_rapid_information_display"
      - "hidden_visual_details_background_elements_subtle_visual_cues"
      - "expression_nuances_facial_expressions_gestures_revealing_additional_meaning"
      - "text_overlay_density_information_rich_overlays_requiring_multiple_viewings"
    
    audio_triggers:
      - "layered_audio_design_multiple_audio_elements_apparent_on_replay"
      - "subtle_sound_effects_background_audio_enhancing_understanding"
      - "vocal_nuances_tone_changes_emphasis_revealing_additional_meaning"
      - "musical_progression_background_music_supporting_emotional_journey"
    
    content_triggers:
      - "information_density_rich_content_rewarding_careful_attention_and_replay"
      - "emotional_complexity_layered_emotional_expression_deepening_with_familiarity"
      - "cultural_references_indonesian_cultural_elements_resonating_more_deeply"
      - "personal_connection_relatable_content_applying_differently_to_evolving_situation"
  
  success_metrics:
    replay_rate: "percentage_of_viewers_who_watch_content_multiple_times"
    replay_depth: "average_number_of_replays_per_engaged_viewer"
    segment_replay: "which_specific_segments_generate_most_replay_activity"
    community_engagement: "discussion_and_theory_building_in_comments"
    series_progression: "viewer_advancement_through_episodic_content"

# ===== CTA ENGINE =====
cta_engine:
  inputs:
    style_weights_from: "rag_style_engine.yaml#fusion_strategy"  # baca bobot final
  decision_logic:
    - if: (style.samuel_christ >= 0.5) and (topic in ["medis","legal"])
      profile: authority
    - elif: style.gadgetin >= 0.5
      profile: aggressive
    - else:
      profile: community

  profiles:
    community:
      patterns: ["ajak komentar", "share pengalaman", "tag temen"]
    authority:
      patterns: ["ikuti langkah", "cek sumber/tautan resmi", "save untuk referensi"]
    aggressive:
      patterns: ["follow biar nggak ketinggalan part 2", "duet sekarang", "drop pendapat panasmu"]

  core_principles:
    community_onboarding_system:
      activation_trigger: "content_addressing_serious_issues_mental_health_ai_ethics"
      purpose: "direct_audience_toward_community_support_rather_than_simple_follow_subscribe"
      implementation: "community_onboarding_cta_automatically_activated_for_sensitive_content"
      
      characteristics:
        - "support_focused_emphasizes_mutual_aid_and_shared_experience"
        - "safe_space_creation_establishes_emotional_safety_and_acceptance"
        - "collective_healing_encourages_community_based_growth_and_recovery"
        - "resource_sharing_provides_access_to_helpful_tools_and_information"
      
      examples:
        - "Join our support community di link bio - kita healing bareng-bareng"
        - "Share pengalaman kalian di comments, kita support satu sama lain"
        - "Community kita always here untuk yang butuh safe space untuk curhat"
    
    cta_loop_logic:
      concept: "ctas_designed_for_automatic_looping_when_containing_motivational_twist_elements"
      implementation: "cta_loop_logic_analyzes_cta_content_for_replay_potential"
      purpose: "creates_engagement_cycles_that_encourage_repeated_interaction"
      
      elements:
        - "motivational_hooks_inspiring_statements_encouraging_return_visits"
        - "progress_tracking_invitations_to_share_ongoing_journey_updates"
        - "challenge_integration_community_challenges_requiring_multiple_interactions"
        - "series_continuation_hints_at_future_content_building_anticipation"
    
    replay_trigger_cta_integration:
      concept: "visual_and_auditory_cues_that_trigger_user_replay_behavior"
      implementation: "replay_trigger_cta_active_at_ending_or_hook_segments"
      purpose: "encourages_immediate_replay_for_missed_details_or_deeper_understanding"
      
      elements:
        - "detail_hints_suggestions_that_viewers_missed_important_information"
        - "layer_revelation_indication_that_content_has_multiple_interpretation_levels"
        - "easter_eggs_hidden_elements_that_reward_careful_attention"
        - "completion_challenges_encourages_replay_to_catch_all_references_or_details"
  
  creator_specific_patterns:
    gadgetin:
      educational_ctas:
        - "Share pengalaman kalian dengan [technology] di comments"
        - "Kalau ada pertanyaan teknis, drop di comment section"
        - "Subscribe kalau kalian mau update teknologi terbaru"
      
      community_building_ctas:
        - "Join diskusi di community tab untuk pembahasan lebih dalam"
        - "Tag teman yang butuh info ini"
        - "Share video ini kalau helpful buat kalian"
      
      authority_based_ctas:
        - "Gue pengen tau pendapat kalian tentang ini - drop comment ya"
        - "Challenge: coba tebak teknologi apa yang bakal gue review next"
        - "Kalian punya power untuk memahami teknologi ini - jangan takut explore"
      
      tone_mapping:
        tone_blend: "analytical_60_conversational_40"
        emotional_goal: "learning_motivation_and_knowledge_sharing"
        implementation_focus: "intellectual_growth_and_community_learning"
    
    jovial:
      community_solidarity_ctas:
        - "Yang pernah ngalamin ini comment 'RELATE', yang belum... tunggu aja"
        - "Share ke teman yang butuh denger ini"
        - "Tag yang orangnya kayak gini"
      
      humorous_engagement_ctas:
        - "Yang setuju comment 'FACTS', yang gak setuju comment 'DENIAL'"
        - "Cerita pengalaman kalian yang lebih absurd di comments"
        - "Rate relatable-nya 1-10 di comments"
      
      cultural_commentary_ctas:
        - "Kalian gak sendirian dalam struggle ini - kita community yang solid"
        - "Your voice matters, jangan takut speak up di comment"
        - "Together kita bisa change narrative yang toxic ini"
      
      tone_mapping:
        tone_blend: "satirical_55_insightful_45"
        emotional_goal: "entertainment_with_depth_and_community_solidarity"
        implementation_focus: "cultural_discussion_with_humor_and_empathy"
    
    samuel:
      supportive_community_ctas:
        - "Share pengalaman kalian di comments, kita support satu sama lain"
        - "Kalau kalian butuh support, community kita selalu ada"
        - "Tag teman yang butuh denger ini hari ini"
      
      growth_oriented_ctas:
        - "Cerita progress kalian di comments, gue bangga sama journey kalian"
        - "Share satu hal yang kalian grateful hari ini"
        - "Drop encouragement buat yang lagi struggle di comments"
      
      healing_focused_ctas:
        - "Gue tau ini personal banget, tapi kalau kalian comfortable, share dong"
        - "Vulnerable moment: siapa yang pernah feel exactly like this?"
        - "Your story has power - jangan underestimate impact kalian ke others"
      
      tone_mapping:
        tone_blend: "vulnerable_50_empowering_50"
        emotional_goal: "community_healing_and_mutual_support"
        implementation_focus: "authentic_sharing_and_collective_growth"
  
  cta_segment_tone_optimization:
    community_building_framework:
      tone_approach: "inclusive_encouraging_supportive"
      emotional_goal: "belonging_and_mutual_support"
      implementation_focus: "shared_experience_and_collective_growth"
      tone_blend: "inclusive_40_encouraging_35_supportive_25"
      timing: "final_10_15_seconds_of_content"
      example: "Share pengalaman kalian di comments [INCLUSIVE], gue yakin story kalian bisa inspire yang lain [ENCOURAGING], dan kita support satu sama lain dalam journey ini [SUPPORTIVE]"
    
    educational_engagement_framework:
      tone_approach: "curious_collaborative_empowering"
      emotional_goal: "learning_motivation_and_knowledge_sharing"
      implementation_focus: "intellectual_growth_and_community_learning"
      tone_blend: "curious_45_collaborative_30_empowering_25"
      timing: "after_delivering_valuable_insights"
      example: "Gue penasaran perspektif kalian tentang ini [CURIOUS], let's discuss dan belajar bareng [COLLABORATIVE], karena collective wisdom kita pasti lebih powerful [EMPOWERING]"
    
    action_oriented_framework:
      tone_approach: "motivational_practical_confident"
      emotional_goal: "immediate_action_and_behavioral_change"
      implementation_focus: "clear_next_steps_and_achievable_goals"
      tone_blend: "motivational_50_practical_30_confident_20"
      timing: "after_providing_actionable_insights"
      example: "Kalian bisa mulai implement ini hari ini [MOTIVATIONAL], start dengan satu small step [PRACTICAL], dan gue yakin kalian bakal see the difference [CONFIDENT]"
    
    entertainment_continuation_framework:
      tone_approach: "playful_anticipatory_connected"
      emotional_goal: "ongoing_engagement_and_entertainment_value"
      implementation_focus: "fun_interaction_and_content_series_building"
      tone_blend: "playful_45_anticipatory_35_connected_20"
      timing: "after_entertaining_content_delivery"
      example: "Drop emoji yang represent mood kalian setelah nonton ini [PLAYFUL], dan stay tuned untuk episode selanjutnya yang bakal lebih wild [ANTICIPATORY], karena journey kita baru mulai [CONNECTED]"
 
  aggressive_cta_engine:
    module_id: "aggressive_cta_patterns"
    enabled: true
    activation_trigger: "when viral_mode = true OR replay_potential > 0.7"
    
    cta_archetypes:
      challenge_based:
        patterns:
          - "Challenge: prove gue salah di comments"
          - "Drop unpopular opinion kalian, yang berani doang"
          - "Tag someone yang perlu denger harsh truth ini"
        tone_mapping: "confrontational_playful"
        engagement_multiplier: 2.3
      
      controversy_driven:
        patterns:
          - "Yang triggered sama ini, explain why di comments"
          - "Debate time: team [A] vs team [B]"
          - "Hot take: [controversial_statement]. Thoughts?"
        tone_mapping: "polarizing_intelligent"
        engagement_multiplier: 3.1
      
      exclusivity_based:
        patterns:
          - "If you get this reference, you're the real one"
          - "OG followers tau maksud gue"
          - "Cuma smart people yang paham ini"
        tone_mapping: "insider_superior"
        engagement_multiplier: 1.8
  
    cta_selection_logic:
      - if_topic_controversial: use_controversy_driven
      - if_creator_authority_high: use_challenge_based  
      - if_audience_loyalty_high: use_exclusivity_based
     
  advanced_techniques:
    fallback_cta_loop_system:
      activation: "when_twist_content_too_heavy_or_emotionally_intense"
      purpose: "provides_gentler_engagement_option_while_maintaining_community_connection"
      implementation: "fallback_cta_loop_automatically_activates_for_emotional_protection"
      
      characteristics:
        - "emotional_safety_acknowledges_heavy_content_without_forcing_engagement"
        - "optional_participation_gives_audience_choice_in_engagement_level"
        - "support_availability_ensures_help_available_for_those_who_need_it"
        - "gentle_transition_moves_from_heavy_content_to_lighter_community_interaction"
    
    self_critique_subtlety_bias_override:
      activation: "when_style_fusion_contains_more_than_30_percent_jovial_or_samuel"
      purpose: "prevents_over_softening_of_hook_or_twist_segments"
      implementation: "self_critique_subtlety_bias_overrides_automatic_intensity_reduction"
      
      characteristics:
        - "bold_maintenance_preserves_impactful_hooks_and_twists"
        - "authentic_expression_maintains_creators_natural_intensity_levels"
        - "emotional_integrity_prevents_dilution_of_genuine_emotional_expression"
        - "cultural_balance_respects_indonesian_communication_norms_while_preserving_impact"
  
  audience_alignment_logic:
    content_segment_mapping:
      mental_health:
        target_psychographic: "gen_z_id_empathy_driven"
        cta_strategy: "community_cta_plus_calm_pacing"
      
      ai_satire:
        target_psychographic: "gen_z_tech_critical_humor"
        cta_strategy: "bold_claim_hook_plus_irony_cta"
      
      product_insight:
        target_psychographic: "curious_plus_skeptical_minds"
        cta_strategy: "gadgetin_style_pacing_plus_facts"
      
      emotional_trap:
        target_psychographic: "underdog_low_trust_persona"
        cta_strategy: "mirror_hook_plus_mesh_id_continuity"
  
  success_metrics:
    engagement_quality: "depth_and_meaningfulness_of_audience_response"
    community_building: "growth_in_supportive_community_interactions"
    behavioral_impact: "actual_audience_action_following_cta"
    emotional_resonance: "audience_emotional_response_alignment_with_intended_outcome"
    cultural_acceptance: "community_reception_of_cta_approach_and_messaging"
    
title_guidelines:
  max_length: 60
  heuristics:
    - "1 strong curiosity gap OR 1 shocking verified fact"
    - "clarity > clickbait; hindari jargon teknis"
    - "bahasa natural Gen Z ID, tanpa hiperbola berlebihan"

social_nudges:
  enabled: true
  examples:
    - "Lo juga ngerasain hal ini kan?"
    - "Tim A vs Tim B—kamu di kubu mana?"
    - "Kalau di posisi kamu, pilih opsi mana?"

# ===== VIRAL POLICY (Single Source of Truth) =====
viral_policy:
  # Default posture untuk CTA/engagement
  # Valid: normal | aggressive
  default_mode: normal

  # Aturan switching; dinilai kualitatif dari riset/topik/metric runtime.
  switch_rules:
    limits:
      aggressive_mode:
        max_segments: 1
        require_guardrail_pass: true
    trigger_aggressive_if:
      - "topic_controversy_score >= 0.6"
      - "replay_potential >= 0.7"
      - "content_novelty_score >= 0.7"          # proxy dari originality_guard
      - "persona_authority = high AND audience_sentiment in [curious, polarized]"
    guardrails_block_aggressive_if:
      - "fact_confidence < 0.85"
      - "safety_sensitivity in [health, legal, finance] AND persona_authority != high"
      - "cultural_risk = high"
      - "moderation_flags.present = true"
    resolution_order:
      - "evaluate guardrails first; if any true -> set active_mode = normal"
      - "else if any trigger_aggressive_if true -> set active_mode = aggressive"
      - "else active_mode = normal"


  # Perilaku per mode—dikonsumsi modul downstream.
  modes:
    normal:
      cta_engine: episodic_cta_engine
      fomo_injection: medium
      parasocial_enabled: true   # mengikuti activation rules parasocial_relationship_engine
      comment_nudge_strength: light
      caption_tone_bias: informative_bold
      hashtag_strategy: "__auto_from_tone+topic"
    aggressive:
      cta_engine: aggressive_cta_engine
      fomo_injection: high
      parasocial_enabled: true
      comment_nudge_strength: strong
      caption_tone_bias: bold_absurd
      hashtag_strategy: "__auto_from_tone+topic"

  # Field yang diekspos untuk dibaca konfigurasi lain
  outputs:
    # Dibaca oleh system prompt sebagai mode kanonik
    default_mode: "${active_mode}"
    # Bendera sederhana untuk modul yang cek flag
    viral_mode: "${active_mode == 'aggressive'}"

# ===== SYNC VALIDATION (Lean QA across script/visual/CTA) =====
sync_validation_system:
  enabled: true
  checks:
    - cross_segment_consistency     # hook → body → CTA konsisten
    - persona_alignment             # sesuai DNA persona & style_weights (consume-only)
    - safeguard_policy_match        # hormati runtime_safeguard flags (fact/disclaimer)
  on_violation:
    action: regenerate_once
    with_constraints:
      - preserve_fact_integrity
      - maintain_emotion_flow
      - keep_persona_voice
  emit_tags:
    - "cinegenix_format_validated"
    - "cta_alignment_verified"
    - "style_fusion_coherence"

# ===== PATCH v3.6.5: THUMBNAIL VS VIDEO CTA SYNC =====
cta_thumbnail_sync:
  enforce_tone_match: true
  rules:
    - "Thumbnail expression ≈ video emotional peak"
    - "Caption CTA tone == video tone (no bait-and-switch)"
  on_mismatch: "soft_block_and_suggest_fix"

# ADD TO rag_engagement_modules.yaml
# INSERT AFTER: cta_thumbnail_sync section (around line ~580)  
# INSERT BEFORE: validation_framework section (around line ~620)
parasocial_relationship_engine:
  module_id: "parasocial_builder"
  enabled: true
  activation: "when emotional_depth > 0.6 OR personal_content = true"
  
  relationship_building_triggers:
    personal_reveal:
      patterns:
        - "Gue belum pernah cerita ini ke siapa-siapa, tapi..."
        - "Jujur sama kalian doang, gue..."
        - "Real talk time - ini struggle gue yang belum pernah gue share"
      psychological_effect: "vulnerability_bonding"
    
    exclusive_access:
      patterns:
        - "Subscriber lama pasti inget waktu gue..."
        - "Yang udah follow gue dari awal tau gue..."
        - "OG audience paham reference ini"
      psychological_effect: "in_group_superiority"
    
    future_promise:
      patterns:
        - "Next week gue bakal expose..."
        - "Soon gue bakal share update tentang..."
        - "Plot twist besar coming up di channel ini"
      psychological_effect: "anticipation_addiction"

  integration_points:
    - hook_segment: personal_reveal
    - valley_segment: vulnerability_deepening
    - cta_segment: future_promise