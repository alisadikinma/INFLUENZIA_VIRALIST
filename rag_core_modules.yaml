# RAG Core Modules Configuration
# Version: v3.8.0
# Converted from: RAG_CORE_MODULES.md
# Purpose: Core content structure and emotional pacing for LLM prompts

version: "3.8.0"
pattern_ref_prefix: "!RAG_CORE_MODULES"
compiled_from:
  - "Hook Template Bank v3.8.0"
  - "Script Format Blueprint v3.8.0"

# ===== DEFAULT TONE =====
default_tone:
  baseline_emotional_state: "curious_engagement_with_cultural_authenticity"
  indonesian_gen_z_markers:
    - "natural_code_switching_indonesian_english"
    - "generational_slang_integration"
    - "cultural_reference_appropriateness"
    - "family_value_respect_with_individual_expression"
  emotional_range_reference: &range_default
    curiosity: "0_disinterested_to_10_must_know_immediately"
    tension: "0_relaxed_to_10_edge_of_seat"
    satisfaction: "0_unfulfilled_to_10_completely_satisfied"
    connection: "0_disconnected_to_10_deeply_related"

# ===== HOOK PATTERNS =====
hook_patterns:
  module_id: "hook_patterns"
  enabled: true
  creator_dna_analysis:
    gadgetin:
      core_traits: "clear_logic_tech_forward_analytical_approach"
    jovial:
      core_traits: "satirical_absurdism_overactor_energy_dramatic_expressions"
    samuel:
      core_traits: "motivational_relatable_storytelling_personal_growth_focus"

# ADD TO rag_core_modules.yaml
viral_hook_engine:
  module_id: "viral_hook_engine"
  enabled: true
  psychological_triggers:
    cognitive_dissonance:
      - pattern: "Dulu gue [belief], ternyata [opposite_reality]"
      - activation: "when topic involves mindset/belief change"
    
    authority_questioning:
      - pattern: "Yang [authority_figure] gak mau kalian tau tentang [topic]"
      - activation: "when topic involves industry/institutional critique"
    
    social_proof_challenge:
      - pattern: "Everyone's doing [trend] wrong, ini cara yang bener"
      - activation: "when topic involves popular practices"
    
    group_identity_threat:
      - pattern: "Gen Z yang masih [assumption] perlu denger ini"
      - activation: "when topic involves generational commentary"

  hook_archetype_pool:
    personal_contradiction: 0.25
    exposed_secret: 0.25
    generational_callout: 0.25
    cultural_inversion: 0.25
    
# ===== FALLBACK CHAIN =====
fallback_chain:
  module_id: "fallback_chain"
  enabled: true
  primary_fallbacks:
    style_fusion_failure:
      condition: "fusion_feels_unnatural_or_forced"
      action: "revert_to_single_creator_style"
    cultural_sensitivity_flag:
      condition: "potential_cultural_offense_detected"
      action: "immediate_pivot_to_respectful_alternative"

# ===== EMOTIONAL VALLEY =====
emotional_valley:
  module_id: "emotional_valley"
  enabled: true
  concept: "optional_emotional_cooldown_period_1_2_lines_after_twist"
  purpose: "allows_audience_processing_time_before_transitioning_to_ending"
  implementation_criteria:
    when_to_use:
      - "high_intensity_twists_creating_significant_emotional_cognitive_disruption"
      - "cultural_sensitivity_when_twist_touches_sensitive_topics"
  emotional_range_reference: *range_default

# ===== TWIST ENGINE =====
twist_generation_engine:
  module_id: "twist_generation_engine"
  enabled: true
  use_narrative_inversion: true
  preferred_twist_style: emotional_shift
  twist_template:
    - setup: "initial belief"
      trigger: "conflict or realization"
      twist: "reversed emotional payoff"
  validator:
    enforce_surprise: true
    enforce_contrast_with_body: true

# ✅ PATCHED MODULE — EDU MODE ENGINE
edu_mode_engine:
  triggers:
    - topic: ["AI", "sains", "sistem kerja", "teknologi masa depan"]
      tone: "reflektif"
  behavior:
    - prioritize_fact_check: true
    - simplify_language: true
    - emphasize_learning: true

# ✅ PATCHED MODULE — EDUCATIONAL FACT INSERTER
educational_fact_inserter:
  module_id: "educational_fact_inserter"
  enabled: true
  trigger_fields: ["script"]
  conditions:
    topic_match: ["biocomputing", "AI hardware", "neuromorphic"]
  insert_type: "inline_number"
  data_source: ["wiki.techfacts", "cortical_labs.pub", "pubmed.live"]
  fallback: "use_fact_template"

# ===== KLING ADAPTATION LOGIC =====
kling_adaptation_logic:
  module_id: "kling_adaptation"
  enabled: true
  enable_causal_chain: true
  causal_graph_template:
    - id: A
      event: "Character discovers clue"
    - id: B
      event: "Character investigates"
      cause: A
    - id: C
      event: "Twist is revealed"
      cause: B
  segment_binding_rule: "Match Kling prompt to causal node ID"

# ADD TO rag_core_modules.yaml
# INSERT AFTER: kling_adaptation_logic section (around line ~90)
# INSERT BEFORE: modules registry section (around line ~110)  
fomo_controversy_engine:
  module_id: "viral_amplification_triggers"
  enabled: true
  
  fomo_mechanics:
    limited_knowledge:
      patterns:
        - "Cuma 10% orang yang actually paham ini"
        - "Most people don't know this industry secret"
        - "Info ini jarang banget dishare publicly"
      activation_trigger: "when educational_content = true"
    
    time_sensitivity:
      patterns:
        - "Before trend ini dead, kalian harus tau"
        - "Sebelum terlambat, ini yang perlu kalian prepare"
        - "Window opportunity ini cuma sebentar"
      activation_trigger: "when trend_related = true"
  
  controversy_injection:
    debate_starters:
      patterns:
        - "Unpopular opinion: [controversial_take]"
        - "Everyone's wrong about [topic], ini kenapa"
        - "Hot take yang bakal bikin triggered: [statement]"
      psychological_trigger: "group_polarization"
    
    authority_challenge:
      patterns:
        - "[Industry/Expert] bilang [claim], tapi ini realitanya"
        - "Yang [authority_figure] gak mau kalian tau"
        - "Behind the scenes [industry] yang mereka sembunyiin"
      psychological_trigger: "anti_establishment"

# PATCH INSTRUCTIONS FOR rag_core_modules.yaml
# Version: v3.7.0 → v3.8.0
# Enhancement: Deep Research Engine Integration
# ===== STEP 1: ADD AFTER line ~85 (after fomo_controversy_engine section) =====
# INSERT THIS ENTIRE SECTION:

deep_research_engine:
  module_id: "comprehensive_research_pipeline"
  enabled: true
  activation_trigger: "post_fact_verification_success"
  priority: "CRITICAL_CONTENT_ENRICHMENT"
  
  research_depth_auto_selection:
    trigger_conditions:
      basic_research:
        - "simple_topics_with_clear_context"
        - "well_established_facts"
        - "non_controversial_subjects"
        sources_target: "3_to_5_sources"
        
      comprehensive_research:
        - "complex_technical_topics"
        - "trending_controversial_issues"
        - "health_medical_information"
        - "financial_economic_topics"
        sources_target: "8_to_12_sources"
        
      expert_level_research:
        - "breaking_news_developments"
        - "scientific_research_topics"
        - "legal_regulatory_matters"
        - "policy_government_issues"
        sources_target: "15_plus_sources"

  research_execution_strategy:
    foundation_building:
      core_fact_expansion: "verify_and_expand_initial_verified_claims"
      knowledge_gap_identification: "map_missing_information_areas"
      stakeholder_mapping: "identify_key_experts_affected_parties"
      opposing_viewpoint_discovery: "find_alternative_perspectives"
    
    information_gathering:
      multi_angle_collection:
        - "technical_scientific_perspective"
        - "social_cultural_impact_analysis"
        - "economic_implications_assessment"
        - "political_regulatory_considerations"
        - "ethical_moral_dimensions"
      
      data_synthesis:
        - "identify_expert_consensus_points"
        - "highlight_ongoing_controversies"
        - "note_acknowledged_uncertainties"
        - "compile_supporting_statistical_evidence"
    
    insight_development:
      viral_angle_discovery:
        - "counterintuitive_surprising_findings"
        - "myth_busting_opportunities"
        - "personal_impact_connection_stories"
        - "future_implication_scenarios"
      
      narrative_construction:
        - "compelling_storyline_development"
        - "human_interest_angle_identification"
        - "universal_relevance_connection"
        - "surprising_connection_discovery"

  indonesian_contextualization:
    local_relevance_research:
      indonesian_specific_data:
        - "local_statistics_and_impact_data"
        - "regional_variation_analysis"
        - "government_policy_response_research"
        - "cultural_adaptation_examples"
      
      cultural_bridge_building:
        - "international_versus_local_approach_comparison"
        - "traditional_versus_modern_perspective_analysis"
        - "generational_difference_research"
        - "cultural_value_implication_assessment"
    
    gen_z_angle_development:
      generational_impact_research:
        - "future_career_implication_analysis"
        - "digital_native_perspective_research"
        - "social_media_generation_effect_study"
        - "emerging_lifestyle_change_documentation"
      
      youth_engagement_elements:
        - "meme_worthy_moment_identification"
        - "social_media_shareable_insight_discovery"
        - "challenge_opportunity_framing"
        - "empowerment_narrative_development"

  content_enrichment_strategies:
    statistical_enhancement:
      data_sourcing_priorities:
        - "official_government_statistics"
        - "academic_research_institution_data"
        - "international_organization_reports"
        - "credible_polling_organization_results"
      
      data_presentation_optimization:
        - "shocking_but_verified_statistics"
        - "before_after_trend_comparisons"
        - "comparative_analysis_with_other_countries"
        - "predictive_scenario_modeling"
    
    expert_voice_integration:
      expert_category_targeting:
        - "academic_researchers_in_field"
        - "industry_practitioners_with_experience"
        - "policy_makers_and_government_officials"
        - "affected_community_representatives"
      
      quote_mining_strategy:
        - "memorable_expert_statement_extraction"
        - "contrarian_expert_opinion_discovery"
        - "predictive_expert_insight_collection"
        - "explanatory_expert_analogy_gathering"
    
    human_story_integration:
      personal_impact_story_research:
        - "individual_success_transformation_stories"
        - "cautionary_tale_example_documentation"
        - "community_impact_story_collection"
        - "family_life_change_narrative_research"
      
      relatability_bridge_construction:
        - "everyday_application_example_finding"
        - "personal_relevance_connection_research"
        - "career_life_implication_analysis"
        - "family_impact_scenario_development"

  research_quality_assurance:
    source_diversity_requirements:
      geographic_diversity: "minimum_3_different_regional_perspectives"
      temporal_diversity: "mix_recent_and_historical_sources"
      perspective_diversity: "multiple_stakeholder_viewpoint_inclusion"
      methodological_diversity: "quantitative_and_qualitative_source_balance"
    
    bias_detection_and_mitigation:
      bias_identification_targets:
        - "political_ideological_bias_detection"
        - "commercial_corporate_interest_bias"
        - "cultural_regional_bias_awareness"
        - "confirmation_bias_in_source_selection"
      
      balance_mechanisms:
        - "deliberate_opposing_viewpoint_seeking"
        - "neutral_academic_source_prioritization"
        - "uncertainty_acknowledgment_where_appropriate"
        - "limitation_acknowledgment_inclusion"

  viral_integration_optimization:
    research_to_viral_bridge:
      information_hierarchy: "most_viral_worthy_information_prioritized"
      complexity_management: "simplification_without_accuracy_loss"
      cultural_translation: "universal_concepts_to_indonesian_context"
      engagement_optimization: "research_insights_to_viral_hook_elements"
    
    educational_entertainment_balance:
      knowledge_transfer_optimization: "ensure_genuine_learning_occurs"
      entertainment_value_maintenance: "viral_mechanics_preserved"
      accuracy_entertainment_balance: "never_sacrifice_truth_for_engagement"
      cultural_relevance_integration: "indonesian_context_appropriateness"

  output_structuring:
    research_synthesis_format:
      core_narrative: "primary_compelling_story_angle"
      supporting_evidence: "facts_statistics_expert_quotes_compilation"
      counterpoint_inclusion: "alternative_perspectives_uncertainty_acknowledgment"
      indonesian_relevance: "local_context_cultural_implication_analysis"
      viral_hook_opportunities: "surprising_counterintuitive_shareable_element_list"
      human_interest_elements: "personal_story_relatable_example_collection"
    
    script_foundation_preparation:
      hook_opportunity_list: "potential_opening_angle_options"
      body_content_structure: "logical_information_flow_organization"
      twist_potential_identification: "surprising_revelation_plot_twist_options"
      cta_direction_suggestions: "audience_action_item_possibilities"
      emotional_journey_design: "planned_emotional_arc_progression"

# ===== STEP 2: UPDATE existing educational_fact_inserter (around line ~75) =====
# REPLACE the existing educational_fact_inserter with:

educational_fact_inserter:
  module_id: "legacy_fact_inserter"
  enabled: false  # Disabled in favor of deep_research_engine
  deprecated: "replaced_by_comprehensive_deep_research_engine"
  migration_note: "functionality_absorbed_into_deep_research_engine"

# ===== STEP 3: UPDATE modules registry section (around line ~110) =====
# ADD this entry to the modules list:

  - name: deep_research_engine
    function: "Comprehensive multi-source research for informatif viral content"
    depends_on: [fact_verification_success]
    priority: "critical_content_enrichment"

# ===== STEP 4: UPDATE module_index section (around line ~140) =====
# ADD this entry:

  deep_research_engine: "*modules[name=deep_research_engine]"

# ===== STEP 5: ADD integration section at end of file =====

research_engine_integration:
  handoff_protocols:
    from_fact_verification: "verified_content_becomes_research_foundation"
    to_hook_generator: "research_insights_inform_viral_hook_creation"
    to_style_fusion: "research_depth_influences_creator_selection"
    to_script_structure: "research_synthesis_shapes_content_organization"
  
  performance_optimization:
    research_caching: "store_research_results_for_similar_topics"
    source_prioritization: "rank_sources_by_reliability_and_viral_potential"
    insight_extraction: "automated_viral_angle_identification"
    cultural_adaptation: "automatic_indonesian_context_integration"

validation_tags:
  - "deep_research_engine_active"
  - "multi_source_research_complete"
  - "indonesian_context_integrated"
  - "viral_angles_identified"
  - "educational_value_confirmed"

# ===== MODULE REGISTRY =====
modules:
  - name: hook_generator
    function: "Generates culturally grounded hook lines"
    depends_on: []
  - name: emotional_pacer
    function: "Modulates emotional pacing across segments"
    depends_on: [hook_generator]
  - name: style_imprinter
    function: "Applies creator style DNA to script"
    depends_on: [hook_generator]
  - name: tone_shifter
    function: "Adjusts tone transitions per segment"
    depends_on: [emotional_pacer, style_imprinter]
  - name: visual_sync_mapper
    function: "Aligns script segments to visual beat timing"
    depends_on: [tone_shifter]
  - name: emotional_glide_engine
    function: "Controls micro-emotional transitions within segments"
    depends_on: [emotional_pacer, tone_shifter]
  - name: validator_interface
    function: "Ensures output meets all QA, safety, and engagement standards"
    depends_on: [hook_generator, style_imprinter, emotional_pacer, tone_shifter]
  - name: fallback_tone_handler
    function: "Fallback engine when tone/style mismatch detected"
    depends_on: [validator_interface]
  - name: twist_optimizer
    function: "Ensures narrative twists follow emotional & logical arc"
    depends_on: [emotional_pacer, tone_shifter]
  - name: thumbnail_emotion_checker
    function: "Verifies thumbnail tone alignment to script content"
    depends_on: [hook_generator, emotional_glide_engine]
  - name: edu_mode_engine
    function: "Adjusts content style to reflective educational tone when triggered"
    depends_on: [hook_generator, style_imprinter]
  - name: narrative_consistency_enforcer
    function: "Ensures logical coherence and segment consistency across script"
    depends_on: [hook_generator, tone_shifter, style_imprinter]

# Tambahkan di bawah ini
module_index:
  hook_generator: "*modules[name=hook_generator]"
  visual_sync_mapper: "*modules[name=visual_sync_mapper]"
  narrative_consistency_enforcer: "*modules[name=narrative_consistency_enforcer]"
  edu_mode_engine: "*modules[name=edu_mode_engine]"
  emotional_valley: "*modules[name=emotional_valley]"
  viral_hook_engine: "*modules[name=viral_hook_engine]"
  fomo_controversy_engine: "*modules[name=fomo_controversy_engine]"

  
# ===== STYLE FUSION SETTINGS =====
style_fusion:
  primary_style: "samuel"
  secondary_style: "jovial"
  tertiary_style: "gadgetin"
  fusion_mode: "weighted_blend"
  dynamic_weighting_enabled: true
  
# ===== LOOKUP HELPERS =====
hook_bank_lookup:
  module_id: "hook_bank_lookup"
  enabled: true
  source: "!RAG_CORE_MODULES/HOOK_PATTERNS"
  return: "top_k_patterns"
  k: 5

persona_style_guide:
  module_id: "persona_style_guide"
  enabled: true
  source: "!STYLE_ENGINE/STYLE_WEIGHTS"
  return: "persona_bias_map"

trending_meme_snippet:
  module_id: "trending_meme_snippet"
  enabled: true
  source: "!RAG_ENGAGEMENT/MEME_TRIGGER"
  return: "latest_meme_format"
  recency_days: 30
